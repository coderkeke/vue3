import"./PlusOutlined-Bo95f7KH.js";import"./useState-DIKhPmwo.js";import{t as e}from"./DynamicForm-uMartnT8.js";import"./select-CC1ZklT2.js";import"./vnode-DGJKgt6h.js";import"./style-CMMP8PqQ.js";import"./wave-DTKiIBeV.js";import"./useRefs-DpNy2-fv.js";import{t}from"./card-C67QZlfo.js";import"./Col-Czvnh7xb.js";import{t as n}from"./button-CE79zmeX.js";import{l as r,n as i}from"./slider-DfcFv3gR.js";import"./DownloadOutlined-C-tHFd-P.js";import"./useFlexGapSupport-gkIuc-8z.js";import"./switch-BoSjhwDX.js";import"./spin-C_hZvxTZ.js";import{t as a}from"./space-Cukkb_Tx.js";import{An as o,Nn as s,Wn as c,Xn as l,_n as u,bn as d,mn as f,vn as p,yn as m}from"./index-IbQU_uUx.js";import"./_plugin-vue_export-helper-t17CR7cw.js";import{n as h}from"./analysis-Cha_teIo.js";import"./Chart-CCRlrDo2.js";import{t as g}from"./BusinessBarChart-Cdwfr81Y.js";import{t as _}from"./CategoryBarChart-CPj7a8me.js";import{t as v}from"./LevelBarChart-cMb0o42s.js";import{t as y}from"./PropertyPieChart-Vnlg2q-J.js";import{t as b}from"./SourcePieChart-DUVwkPni.js";import{t as x}from"./TimeStackBarChart-DVeYEX2N.js";import{t as S}from"./UnitLineChart-4XFwOOzL.js";var C={class:`p-4`},w={style:{"text-align":`right`}},T={class:`mt-4`},E=d({name:`HiddenDangerAnalysis`,__name:`index`,setup(d){let E=l(!1),D=l([]),O=l({}),k=l({}),A=async()=>{E.value=!0;try{let e=(await h()).data;if(e&&e.success){let t=[];e.groupColumns.forEach(n=>{let r=e.columnStats[n]||[];t.push({field:n,label:n,component:`Select`,componentProps:{options:r.map(e=>{console.log(`opt:`,e);let t=e[n];return{label:`${t} (${e.count})`,value:t}}),showSearch:!0,allowClear:!0,mode:`multiple`,maxTagCount:1,placeholder:`请选择`},colProps:{span:6,xs:24,sm:12,md:8,lg:6,xl:6}})}),t.push({field:`action`,label:``,slot:`action`,formItemProps:{wrapperCol:{span:24}},colProps:{span:6,xs:24,sm:12,md:8,lg:6,xl:6}}),D.value=t}}catch(e){console.error(`获取筛选条件失败:`,e)}finally{E.value=!1}};o(()=>{A()});let j=()=>{let e={};Object.keys(O.value).forEach(t=>{let n=O.value[t];if(n!=null&&n!==``){if(Array.isArray(n)&&n.length===0)return;e[t]=n}}),console.log(`Search Params:`,e),k.value=e},M=()=>{Object.keys(O.value).forEach(e=>{O.value[e]=void 0}),k.value={}};return(o,l)=>{let d=n,h=a,A=t,N=r,P=i;return s(),u(`div`,C,[m(A,{title:`数据筛选`,loading:E.value},{default:c(()=>[m(e,{model:O.value,schemas:D.value,"row-props":{gutter:[16,16]}},{action:c(()=>[f(`div`,w,[m(h,null,{default:c(()=>[m(d,{type:`primary`,onClick:j},{default:c(()=>[...l[0]||=[p(`查询`,-1)]]),_:1}),m(d,{onClick:M},{default:c(()=>[...l[1]||=[p(`重置`,-1)]]),_:1})]),_:1})])]),_:1},8,[`model`,`schemas`])]),_:1},8,[`loading`]),f(`div`,T,[m(A,{title:`图表展示`},{default:c(()=>[m(P,{gutter:[16,16]},{default:c(()=>[m(N,{xs:24,md:12},{default:c(()=>[m(v,{conditions:k.value},null,8,[`conditions`])]),_:1}),m(N,{xs:24,md:12},{default:c(()=>[m(_,{conditions:k.value},null,8,[`conditions`])]),_:1})]),_:1}),m(P,{gutter:[16,16],class:`mt-4`},{default:c(()=>[m(N,{xs:24,md:12},{default:c(()=>[m(b,{conditions:k.value},null,8,[`conditions`])]),_:1}),m(N,{xs:24,md:12},{default:c(()=>[m(y,{conditions:k.value},null,8,[`conditions`])]),_:1})]),_:1}),m(P,{gutter:[16,16],class:`mt-4`},{default:c(()=>[m(N,{xs:24,lg:12},{default:c(()=>[m(g,{conditions:k.value},null,8,[`conditions`])]),_:1}),m(N,{xs:24,lg:12},{default:c(()=>[m(S,{conditions:k.value},null,8,[`conditions`])]),_:1})]),_:1}),m(P,{gutter:[16,16],class:`mt-4`},{default:c(()=>[m(N,{span:24},{default:c(()=>[m(x,{conditions:k.value},null,8,[`conditions`])]),_:1})]),_:1})]),_:1})])])}}});export{E as default};